<!DOCTYPE html>
<html lang="en">

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/style.css">
<title>동기 / 비동기의 늪</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>동기 / 비동기의 늪 | 인구의 자기계개발</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="동기 / 비동기의 늪" />
<meta name="author" content="GitHub User" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="동기 / 비동기 알기" />
<meta property="og:description" content="동기 / 비동기 알기" />
<link rel="canonical" href="http://localhost:4000/javascript/%EB%8F%99%EA%B8%B0/%EB%B9%84%EB%8F%99%EA%B8%B0/promise/async/await/2023/01/15/%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0.html" />
<meta property="og:url" content="http://localhost:4000/javascript/%EB%8F%99%EA%B8%B0/%EB%B9%84%EB%8F%99%EA%B8%B0/promise/async/await/2023/01/15/%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0.html" />
<meta property="og:site_name" content="인구의 자기계개발" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-01-15T22:00:03+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="동기 / 비동기의 늪" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"GitHub User"},"dateModified":"2023-01-15T22:00:03+09:00","datePublished":"2023-01-15T22:00:03+09:00","description":"동기 / 비동기 알기","headline":"동기 / 비동기의 늪","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/javascript/%EB%8F%99%EA%B8%B0/%EB%B9%84%EB%8F%99%EA%B8%B0/promise/async/await/2023/01/15/%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0.html"},"url":"http://localhost:4000/javascript/%EB%8F%99%EA%B8%B0/%EB%B9%84%EB%8F%99%EA%B8%B0/promise/async/await/2023/01/15/%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/assets/js/darkmode.js"></script>

</head><body>
  <main class="container">
    <section class="about">
      <div class="about-header condensed">
      <div class="about-title">
      <a href="/">
        
        <img src="/assets/portfolio.png" alt="Ingu Kim" />
        
      </a>
      <h2 id="title">
        <a href="/">Ingu Kim</a>
      </h2>
      </div><p class="tagline">개 발 자</p></div>
      
      <ul class="social about-footer condensed"><a href="https://github.com/ingu8349" target="_blank">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a></ul><p class="about-footer condensed">&copy;
        2023</p><div class="about-footer condensed">
        <p>Dark Mode
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" class="dark-mode-toggle">
            <span class="slider round" onclick="toggleDarkMode()"></span>
          </label>
        </p>
      </div>
    </section>
    <section class="content">
      <div class="post-container">
  <a class="post-link" href="/javascript/%EB%8F%99%EA%B8%B0/%EB%B9%84%EB%8F%99%EA%B8%B0/promise/async/await/2023/01/15/%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0.html">
    <h2 class="post-title">동기 / 비동기의 늪</h2>
  </a>
  <div class="post-meta">
    <div class="post-date"><i class="icon-calendar"></i>2023,Jan 15</div><ul class="post-categories"><li>javascript</li><li>동기</li><li>비동기</li><li>promise</li><li>async</li><li>await</li></ul></div>
  <div class="post">
    <p>동기 / 비동기 알기</p>

<h2 id="왜-나만-이해를-못하는-것-같지">왜 나만 이해를 못하는 것 같지</h2>

<p>싶을정도로 수많은 유튜브 강의와 글들이 있었는데 좀 기준이 잡히는 것 같아서 글을 남긴다.</p>

<p>사실 동기 / 비동기가 뭔지는 바로 이해를 했었었다.</p>

<p>동기 : 순차적으로 앞에 것 끝날 때까지 기다렸다 다음거 실행한다. 이렇다
그래서 설계하기 쉽고 순차적으로 진행하는데, 앞에꺼 끝나고 그래야 다음 라운드를 진행하기때문에 시간이 오래걸린다.</p>

<p>비동기 : 순서 없어 그냥 한번에 다다닥.
시간을 아낄수있다. 좋다. 대표적인 비동기 setTimeOut 다 setTimeOut 함수로 설명하더라.
왜냐하면 setTimeOut에 지정한 밀리세컨이 끝날때 까지 기다렷다 다음꺼 할텐데 그런거없다. 그냥 다른거도 하고 setTimeOut값이 나와도 상관없더라.</p>

<p>흠. 그리고 내가 멍청해서인지 제일 이해가 안됫던,? 아니 잘못 해석해서 이해하고 있었던 부분에서 명쾌한 글을 찾아서 정리한다.</p>

<h2 id="자바스크립트에서의-비동기를-동기로-동작시키는-대표적인-3가지의-방법">자바스크립트에서의 비동기를 동기로 동작시키는 대표적인 3가지의 방법</h2>
<ol>
  <li>Callback Function</li>
  <li>Promise</li>
  <li>Async / Await
바로 이거다. 이게 동기인가 비동기인가 난 왜모르지 할 때 혜성처럼 등장한
    <h2 id="비동기를-동기로-동작시킨다">비동기를 동기로 동작시킨다.</h2>
    <p>이 문구가 확 와닿았다..</p>
  </li>
</ol>

<p>먼저 callback함수는 이미 써놓은 글이 있으니, 그걸보면 되고</p>

<ul>
  <li>Promise는 프로미스는 자바스크립트 비동기 처리에 사용되는 객체.</li>
  <li>여기서 자바스크립트의 비동기 처리란 ‘특정 코드의 실행이 완료될 때까지 기다리지 않고 다음 코드를 먼저 수행하는 자바스크립트의 특성’을 의미</li>
</ul>

<p>Promise는 다음 중 하나의 상태를 가집니다.</p>

<ul>
  <li>대기(pending): 이행하지도, 거부하지도 않은 초기 상태.</li>
  <li>이행(fulfilled): 연산이 성공적으로 완료됨.</li>
  <li>거부(rejected): 연산이 실패함.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 쉽게 이런식으로 쓰고,</span>
<span class="kd">let</span> <span class="nx">myFirstPromise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// 우리가 수행한 비동기 작업이 성공한 경우 resolve(...)를 호출하고, 실패한 경우 reject(...)를 호출합니다.</span>
    <span class="c1">// 이 예제에서는 setTimeout()을 사용해 비동기 코드를 흉내냅니다.</span>
    <span class="c1">// 실제로는 여기서 XHR이나 HTML5 API를 사용할 것입니다.</span>
    <span class="nx">setTimeout</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">성공!</span><span class="dl">"</span><span class="p">)</span>  <span class="c1">// 와! 문제 없음!</span>
    <span class="p">},</span> <span class="mi">250</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">myFirstPromise</span><span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">successMessage</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// successMessage는 위에서 resolve(...) 호출에 제공한 값입니다.</span>
    <span class="c1">// 문자열이어야 하는 법은 없지만, 위에서 문자열을 줬으니 아마 문자열일 것입니다.</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">와! </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">successMessage</span><span class="p">)</span>
<span class="p">});</span>
<span class="c1">// then을 써서 넘겨받은 데이터를 또 사용할 수 있다. 이런건 꽤 많이 본 케이스다 then</span>

<span class="c1">// 오류의 상황에선 catch를 써서 대응을 한다!</span>
<span class="nx">getData</span><span class="p">().</span><span class="nx">then</span><span class="p">().</span><span class="k">catch</span><span class="p">();</span>
<span class="c1">// 이런 식으로 쓴다.</span>

<span class="c1">//전체적으로 다른 코드를 보자면</span>
<span class="kd">function</span> <span class="nx">heelo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">reject</span><span class="p">(</span><span class="dl">'</span><span class="s1">failed</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// 1. then()의 두 번째 인자로 에러를 처리하는 코드</span>
<span class="nx">heelo</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// 2. catch()로 에러를 처리하는 코드</span>
<span class="nx">heelo</span><span class="p">().</span><span class="nx">then</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// 이런식으로 쓸 수 있다.</span>
</code></pre></div></div>
<ul>
  <li>Async / Await 말그대로 동작을 일시정지 시킨것처럼 보이게 해주고 Promise 나 Callback 보다는 직관적인 코드 패턴을 가질 수 있다.</li>
  <li>async 함수 내부에서는 promise 객체들의 순서를 await을 이용하여 순서 조절이 가능합니다.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//좋은 예가 있어서 가져와봤다.</span>

<span class="kd">function</span> <span class="nx">promise</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">히히히</span><span class="dl">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">){</span>
        <span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">resolve</span><span class="p">(</span><span class="mi">10</span><span class="p">)},</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">hi</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nx">num</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">()</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">num</span><span class="dl">"</span><span class="p">,</span> <span class="nx">num</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">hi</span><span class="p">()</span> <span class="c1">// 이러면 답이 뭐가나올까</span>
<span class="c1">// 먼저 1 찍히고 await가 있으니까 promise 객체로 가서 하하하 찍히고 1초있다가 resolve 10 </span>
<span class="c1">// 반환된다음 마지막으로 "num", 10 뙇</span>
</code></pre></div></div>

<p>이렇게 쓰면된다!! 
뭐가 더 좋고 나쁘고는 없다고 한다. 다 알아두고 실전에서 써먹으면서 더 자연스러워지게 해야겠다.</p>

<p>아 쓰다보니 깜빡한 한가지 promise.all([]), 배열이 들어간다.
2개의 작업이 있고, 한가지 작업은 1초가 걸리고 다른 한가지 작업은 2초가 걸릴 때, 우리가 원하는 것은 두개의 작업이 ‘모두’ 마무리 된 후에 다른 작업이 이루어지기를 바랄떄 쓸 수 있는데.</p>

<p>Promise.all 에 [첫번째 Promise, 두번째 Promise] 의 형태로 넘겨주면 모든 Promise의 작업이 끝난후 then 에 결과값을 배열형태로 넘겨준다! 써먹어보자 이거도</p>


  </div></div>

    </section>
    <footer class="condensed">
      <ul class="social about-footer condensed"><a href="https://github.com/ingu8349" target="_blank">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a></ul><p class="about-footer condensed">&copy;
        2023</p><div class="about-footer condensed">
        <p>Dark Mode
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" class="dark-mode-toggle">
            <span class="slider round" onclick="toggleDarkMode()"></span>
          </label>
        </p>
      </div>
    </footer>
  </main>
  
  <script type="text/javascript" src="/assets/js/darkmode.js"></script>
  
  <script src="/assets/js/simple-jekyll-search.min.js"></script>
  <script src="/assets/js/search.js"></script>
  
</body>

</html>
